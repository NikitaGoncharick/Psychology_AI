<div class="chat-wrapper">

    <!-- –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="sidebar">
      <div>
        <div class="text-center mb-5">
          <div class="logo-circle">#</div>
          <h5 class="mt-3">No name</h5>
        </div>
      </div>

      <div class="d-flex align-items-center gap-3">
        <div class="user-avatar">U</div>
        <div>
          <div class="fw-medium">Guest User</div>
          <small class="text-muted">Guest</small>
        </div>
      </div>
    </div>

    <!-- —á–∞—Ç -->
    <div class="chat-main d-flex flex-column">

      <div class="border-bottom px-4 py-1 bg-white">
        <h5 class="mb-1 fw-bold text-dark">Psychology AI</h5>
        <small class="text-muted">A calm space to talk, whenever you need</small>
        <!--<span class="badge bg-success-subtle text-success-emphasis float-end mt-2">Gentle mode</span> -->
      </div>

      <div id="messages" class="flex-grow-1 overflow-auto px-4 py-4"></div>

      <div id="typing" class="htmx-indicator px-4 pb-1">
        <div class="msg-ai d-inline-block p-1"><i>typing...</i></div>
      </div>

      <div class="chat-footer">
        <!--–æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—ë—Ç —Ç–µ–∫—Å—Ç –≤ Python-—Ñ—É–Ω–∫—Ü–∏—é-->
        <!--hx-post –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ–±—ã—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã –∏ –¥–µ–ª–∞–µ—Ç –µ—ë —á–µ—Ä–µ–∑ AJAX –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã-->
        <form hx-post="/guest/send" hx-target="#messages" hx-swap="beforeend" hx-indicator="#typing">
          <div class="input-group">
            <input name="text" class="form-control shadow-sm input-message" placeholder="Share what's on your mind..." autofocus required>
            <button type="submit" class="btn btn-send"> > </button>
          </div>
        </form>

        <div class="text-center mt-3">
          <small class="text-muted">
            This space is for reflection and support. It is not a substitute for emergency or crisis services.
          </small>
        </div>
      </div>

        <!-- –ö—Ä–∞—Å–∏–≤–∞—è –º–æ–¥–∞–ª–∫–∞: –∫–æ–Ω–µ—Ü –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div class="modal fade" id="guestLimitModal" tabindex="-1" aria-labelledby="guestLimitModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content overflow-hidden border-0 shadow-xl" style="border-radius: 24px; max-width: 500px;">

              <!-- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ö–µ–¥–µ—Ä —Å –≤–æ–ª–Ω–æ–π -->
              <div class="position-relative text-white text-center py-5" style="
                background: linear-gradient(135deg, #4a9086 0%, #6ab5a8 100%);
                border-radius: 24px 24px 0 0;
                overflow: hidden;
              ">
                <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –≤–æ–ª–Ω–∞ —Å–Ω–∏–∑—É -->
                <svg viewBox="0 0 500 150" preserveAspectRatio="none" class="position-absolute bottom-0 start-0 w-100" style="height: 60px;">
                  <path d="M0,100 C150,150 350,50 500,100 L500,150 L0,150 Z" fill="white" opacity="0.15"></path>
                </svg>

                <!-- –ë–æ–ª—å—à–∞—è –∏–∫–æ–Ω–∫–∞ —Å —Å–µ—Ä–¥—Ü–µ–º -->
                <div class="mx-auto mb-3 d-inline-flex align-items-center justify-content-center rounded-circle bg-white bg-opacity-20"
                     style="width: 90px; height: 90px; backdrop-filter: blur(10px);">
                  <i class="fs-1">üíô</i>
                </div>

                <h4 class="modal-title fw-bold mb-2 px-4" id="guestLimitModalLabel">
                  –í—ã –±—ã–ª–∏ —É—Å–ª—ã—à–∞–Ω—ã
                </h4>
                <p class="mb-0 px-4 opacity-90" style="font-size: 1.05rem;">
                  –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ–¥–µ–ª–∏–ª–∏—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏
                </p>
              </div>

              <!-- –¢–µ–ª–æ –º–æ–¥–∞–ª–∫–∏ -->
              <div class="modal-body text-center py-5 px-4 bg-white">
                <p class="text-muted mb-4 lead" style="font-size: 1.1rem;">
                  –í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—Å–µ 3 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≥–æ—Å—Ç–µ–≤–æ–º —Ä–µ–∂–∏–º–µ.
                </p>

                <p class="mb-5 text-dark" style="line-height: 1.6;">
                  –ß—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –Ω–∞—à–µ —Å–ø–æ–∫–æ–π–Ω–æ–µ –∏ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π ‚Äî
                  <strong>–ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É</strong>.
                </p>

                <!-- –ö–Ω–æ–ø–∫–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏ –º—è–≥–∫–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
                <div class="d-grid gap-3 mx-3">
                  <a href="/register" class="btn btn-lg fw-semibold position-relative overflow-hidden d-flex align-items-center justify-content-center gap-3"
                     style="
                       background: linear-gradient(135deg, #4a9086, #5ab8a9);
                       color: white;
                       border: none;
                       border-radius: 16px;
                       padding: 16px;
                       transition: all 0.3s ease;
                       box-shadow: 0 8px 25px rgba(74, 144, 134, 0.3);
                     "
                     onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 30px rgba(74,144,134,0.4)'"
                     onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(74,144,134,0.3)'">
                    <i class="fs-4">‚ú®</i>
                    <span>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
                  </a>

                  <a href="/login" class="btn btn-lg btn-outline-secondary fw-medium"
                     style="border-radius: 16px; padding: 14px; border-width: 2px;">
                    –£ –º–µ–Ω—è —É–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                  </a>
                </div>

                <div class="mt-5">
                  <small class="text-muted d-block mb-1">
                    –≠—Ç–æ –∑–∞–π–º—ë—Ç <strong>–º–µ–Ω—å—à–µ –º–∏–Ω—É—Ç—ã</strong>
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
    <!-- –∫–æ–Ω–µ—Ü —á–∞—Ç–∞ -->

  </div>